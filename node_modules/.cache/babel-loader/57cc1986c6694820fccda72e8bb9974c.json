{"ast":null,"code":"import _defineProperty from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Header from './Components/Header';\nimport { Row, Col } from 'react-materialize';\nimport SnippetContainer from './Containers/SnippetContainer';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport SnippetView from './Components/SnippetView';\nvar BASEURL = 'https://csstyle-backend.herokuapp.com/';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      snippets: [],\n      userSnippets: [],\n      styleSheet: {\n        filename: ''\n      },\n      selectedSnippet: {},\n      searchValue: '',\n      snippetForm: {\n        name: '',\n        html: '',\n        css: '',\n        user_id: '',\n        tags: ''\n      },\n      authenticated: false,\n      loginToggled: true,\n      loginUsername: {\n        username: '',\n        image: ''\n      },\n      currentuser: null\n    };\n\n    _this.handleSubmit = function (e) {\n      e.persist();\n      e.preventDefault();\n      fetch(\"\".concat(BASEURL, \"/api/v1/snippets\"), {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify(_objectSpread({}, _this.state.snippetForm, {\n          user_id: _this.state.currentuser.id\n        }))\n      }).then(function (r) {\n        return r.json();\n      }).then(function (data) {\n        _this.setState(function (prevState) {\n          return {\n            snippets: [data].concat(_toConsumableArray(prevState.snippets)),\n            userSnippets: [data].concat(_toConsumableArray(prevState.userSnippets))\n          };\n        }, function () {\n          _this.setState({\n            snippetForm: {\n              name: '',\n              html: '',\n              css: '',\n              user_id: '',\n              tags: ''\n            }\n          }, function () {\n            document.querySelector('.btn.waves-effect.waves-light.btn-flat.modal-action.modal-close').click();\n          });\n        });\n      });\n    };\n\n    _this.toggleLoginForm = function (e) {\n      _this.setState({\n        loginUsername: {\n          username: '',\n          image: ''\n        }\n      }, function () {\n        _this.setState(function (prevState) {\n          return {\n            loginToggled: !prevState.loginToggled\n          };\n        });\n      });\n    };\n\n    _this.handleChange = function (e) {\n      e.persist();\n\n      _this.setState(function (prevState) {\n        return {\n          snippetForm: _objectSpread({}, prevState.snippetForm, _defineProperty({}, e.target.id, e.target.value))\n        };\n      });\n    };\n\n    _this.handleLoginUsername = function (e) {\n      e.persist();\n\n      if (e.target.id === \"username\") {\n        _this.setState(function (prevState) {\n          return {\n            loginUsername: _objectSpread({}, prevState.loginUsername, {\n              username: e.target.value\n            })\n          };\n        });\n      } else if (e.target.id === \"user_image\") {\n        _this.setState(function (prevState) {\n          return {\n            loginUsername: _objectSpread({}, prevState.loginUsername, {\n              image: e.target.value\n            })\n          };\n        });\n      }\n    };\n\n    _this.signIn = function (e) {\n      fetch(\"\".concat(BASEURL, \"/api/v1/login\"), {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": 'application/json',\n          \"Accept\": 'application/json'\n        },\n        body: JSON.stringify({\n          username: _this.state.loginUsername.username\n        })\n      }).then(function (r) {\n        return r.json();\n      }).then(function (r) {\n        _this.setState({\n          authenticated: r.success,\n          currentuser: r.user,\n          userSnippets: r.snippets\n        });\n      });\n    };\n\n    _this.handleRegister = function (e) {\n      fetch(\"\".concat(BASEURL, \"/api/v1/users\"), {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": 'application/json',\n          \"Accept\": 'application/json'\n        },\n        body: JSON.stringify({\n          username: _this.state.loginUsername.username,\n          user_image: _this.state.loginUsername.image\n        })\n      }).then(function (r) {\n        return r.json();\n      }).then(function (r) {\n        _this.setState({\n          authenticated: r.success,\n          currentuser: r.user,\n          userSnippets: r.snippets\n        });\n      });\n    };\n\n    _this.handleSnippetSelect = function (e) {\n      var selectedSnippet = _this.state.snippets.find(function (snippet) {\n        return snippet.id === e.target.snippetId;\n      });\n\n      _this.setState({\n        selectedSnippet: selectedSnippet\n      });\n    };\n\n    _this.updateSnippet = function (response) {\n      var snippets = _this.state.snippets.map(function (snippet) {\n        if (snippet.id === response.id) {\n          return response;\n        } else {\n          return snippet;\n        }\n      });\n\n      _this.setState({\n        snippets: snippets\n      });\n\n      var userSnippets = _this.state.userSnippets.map(function (snippet) {\n        if (snippet.id === response.id) {\n          return response;\n        } else {\n          return snippet;\n        }\n      });\n\n      _this.setState({\n        userSnippets: userSnippets\n      });\n    };\n\n    _this.deleteSnippet = function (response) {\n      var snippets = _this.state.snippets.filter(function (snippet) {\n        if (snippet.id === response.id) {\n          return false;\n        } else {\n          return true;\n        }\n      });\n\n      _this.setState({\n        snippets: snippets\n      });\n\n      var userSnippets = _this.state.userSnippets.filter(function (snippet) {\n        if (snippet.id === response.id) {\n          return false;\n        } else {\n          return true;\n        }\n      });\n\n      _this.setState({\n        userSnippets: userSnippets\n      });\n    };\n\n    _this.handleKeyPress = function (e) {\n      if (e.charCode === 13) {\n        _this.signIn();\n      }\n    };\n\n    _this.handleLogOut = function (e) {\n      _this.setState({\n        userSnippets: [],\n        selectedSnippet: {},\n        snippetForm: {\n          name: '',\n          html: '',\n          css: '',\n          user_id: '',\n          tags: ''\n        },\n        authenticated: false,\n        loginToggled: true,\n        loginUsername: {\n          username: '',\n          image: ''\n        },\n        currentuser: null\n      });\n    };\n\n    _this.handleSearch = function (e) {\n      _this.setState({\n        searchValue: e.target.value\n      });\n    };\n\n    _this.filterSnippets = function (snippets) {\n      if (_this.state.searchValue === \"\") {\n        return snippets;\n      }\n\n      return snippets.filter(function (snippet) {\n        return snippet.tags.map(function (tag) {\n          return tag.tag_name.toLowerCase().includes(_this.state.searchValue.toLowerCase());\n        }).includes(true);\n      });\n    };\n\n    _this.clickTag = function (e) {\n      e.target.parentNode.click();\n      document.getElementById('search').focus();\n\n      _this.setState({\n        searchValue: e.target.innerHTML\n      });\n    };\n\n    _this.generateStyleSheet = function (e) {\n      fetch(\"\".concat(BASEURL, \"/api/v1/snippets/\").concat(e.target.id)).then(function (r) {\n        return r.json();\n      }).then(function (styleSheet) {\n        _this.setState({\n          styleSheet: styleSheet\n        });\n      });\n    };\n\n    _this.downloadCSS = function (e) {\n      e.persist();\n      fetch(\"\".concat(BASEURL, \"/api/v1/snippets/\").concat(e.target.id, \"/stylesheet\")).then(function (r) {\n        return r.json();\n      }).then(function (data) {\n        var a = window.document.createElement('a');\n        a.href = window.URL.createObjectURL(new Blob([data.css], {\n          type: 'text/css'\n        }));\n        a.download = \"snippet_\".concat(e.target.id, \".css\");\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch(\"\".concat(BASEURL, \"/api/v1/snippets\")).then(function (r) {\n        return r.json();\n      }).then(function (data) {\n        _this2.setState({\n          snippets: data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(Header, {\n        handleKeyPress: this.handleKeyPress,\n        handleLogOut: this.handleLogOut,\n        currentuser: this.state.currentuser,\n        handleRegister: this.handleRegister,\n        signIn: this.signIn,\n        handleLoginUsername: this.handleLoginUsername,\n        loginUsername: this.state.loginUsername,\n        loginToggled: this.state.loginToggled,\n        authenticated: this.state.authenticated,\n        toggleLoginForm: this.toggleLoginForm,\n        snippetForm: this.state.snippetForm,\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(Col, {\n        s: 10,\n        offset: 's1',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(SnippetContainer, {\n            clickTag: _this3.clickTag,\n            searchValue: _this3.state.searchValue,\n            handleSearch: _this3.handleSearch,\n            deleteSnippet: _this3.deleteSnippet,\n            updateSnippet: _this3.updateSnippet,\n            snippets: _this3.filterSnippets(_this3.state.snippets),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), this.state.authenticated && React.createElement(Route, {\n        exact: true,\n        path: \"/user\",\n        render: function render() {\n          return React.createElement(SnippetContainer, {\n            clickTag: _this3.clickTag,\n            searchValue: _this3.state.searchValue,\n            handleSearch: _this3.handleSearch,\n            deleteSnippet: _this3.deleteSnippet,\n            updateSnippet: _this3.updateSnippet,\n            snippets: _this3.filterSnippets(_this3.state.userSnippets),\n            user: _this3.state.currentuser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 265\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/snippet/:id\",\n        render: function render(props) {\n          return React.createElement(SnippetView, {\n            downloadCSS: _this3.downloadCSS,\n            styleSheet: _this3.state.styleSheet,\n            generateStyleSheet: _this3.generateStyleSheet,\n            snippets: _this3.state.snippets,\n            snippetId: parseInt(props.match.params.id),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 269\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/src/App.js"],"names":["React","Component","Header","Row","Col","SnippetContainer","BrowserRouter","Router","Route","SnippetView","BASEURL","App","state","snippets","userSnippets","styleSheet","filename","selectedSnippet","searchValue","snippetForm","name","html","css","user_id","tags","authenticated","loginToggled","loginUsername","username","image","currentuser","handleSubmit","e","persist","preventDefault","fetch","method","headers","body","JSON","stringify","id","then","r","json","data","setState","prevState","document","querySelector","click","toggleLoginForm","handleChange","target","value","handleLoginUsername","signIn","success","user","handleRegister","user_image","handleSnippetSelect","find","snippet","snippetId","updateSnippet","response","map","deleteSnippet","filter","handleKeyPress","charCode","handleLogOut","handleSearch","filterSnippets","tag","tag_name","toLowerCase","includes","clickTag","parentNode","getElementById","focus","innerHTML","generateStyleSheet","downloadCSS","a","window","createElement","href","URL","createObjectURL","Blob","type","download","appendChild","removeChild","props","parseInt","match","params"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Header from './Components/Header'\nimport {Row, Col} from 'react-materialize'\nimport SnippetContainer from './Containers/SnippetContainer'\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\nimport SnippetView from './Components/SnippetView'\n\nconst BASEURL = 'https://csstyle-backend.herokuapp.com/';\n\nclass App extends Component {\n  state={\n    snippets: [],\n    userSnippets: [],\n    styleSheet: {filename: ''},\n    selectedSnippet: {},\n    searchValue: '',\n    snippetForm: {\n      name: '',\n      html: '',\n      css: '',\n      user_id: '',\n      tags: ''\n    },\n    authenticated: false,\n    loginToggled: true,\n    loginUsername: {username: '', image: ''},\n    currentuser: null,\n  }\n  componentDidMount(){\n    fetch(`${BASEURL}/api/v1/snippets`)\n    .then(r=>r.json())\n    .then(data=>{\n      this.setState({\n        snippets: data\n      })\n    })\n  }\n\n  handleSubmit = e => {\n    e.persist()\n    e.preventDefault()\n    fetch(`${BASEURL}/api/v1/snippets`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({...this.state.snippetForm, user_id: this.state.currentuser.id})\n    })\n    .then(r=>r.json())\n    .then(data => {\n      this.setState(prevState=>{\n        return {snippets: [data, ...prevState.snippets], userSnippets: [data, ...prevState.userSnippets] }\n      }, () => {\n        this.setState({\n          snippetForm: {\n            name: '',\n            html: '',\n            css: '',\n            user_id: '',\n            tags: ''\n          }\n        },()=>{\n          document.querySelector('.btn.waves-effect.waves-light.btn-flat.modal-action.modal-close').click()})\n      })\n    })\n\n\n  }\n  toggleLoginForm = e => {\n    this.setState({loginUsername: {username: '', image: ''}},() => {\n      this.setState(prevState => {\n        return {loginToggled: !prevState.loginToggled}\n      })\n    })\n  }\n\n  handleChange = e => {\n    e.persist()\n    this.setState(prevState=>{\n      return {snippetForm: {...prevState.snippetForm, [e.target.id]:e.target.value}}\n    })\n  }\n\n  handleLoginUsername = e => {\n    e.persist()\n    if(e.target.id===\"username\"){\n      this.setState(prevState =>\n        {\n          return {loginUsername: {...prevState.loginUsername, username: e.target.value}}\n        }\n      )\n    }else if(e.target.id===\"user_image\"){\n      this.setState(prevState =>\n        {\n          return {loginUsername: {...prevState.loginUsername, image: e.target.value}}\n        }\n      )\n    }\n  }\n\n  signIn = (e) => {\n    fetch(`${BASEURL}/api/v1/login`, {\n      method: 'POST',\n      headers:\n      {\n        \"Content-Type\": 'application/json',\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify({\n        username: this.state.loginUsername.username\n      })\n    })\n    .then(r=>r.json())\n    .then(r=> {\n      this.setState({ authenticated: r.success, currentuser: r.user, userSnippets: r.snippets})\n    })\n  }\n\n  handleRegister = (e) => {\n    fetch(`${BASEURL}/api/v1/users`, {\n      method: 'POST',\n      headers:\n      {\n        \"Content-Type\": 'application/json',\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify({\n        username: this.state.loginUsername.username,\n        user_image: this.state.loginUsername.image\n      })\n    })\n    .then(r=>r.json())\n    .then(r=> {\n        this.setState({ authenticated: r.success, currentuser: r.user, userSnippets: r.snippets})\n      })\n    }\n\n    handleSnippetSelect = e => {\n      const selectedSnippet = this.state.snippets.find(snippet =>{\n        return snippet.id === e.target.snippetId\n      })\n      this.setState({selectedSnippet})\n    }\n\n    updateSnippet = (response) =>{\n      const snippets = this.state.snippets.map(snippet=>{\n        if(snippet.id === response.id){\n          return response\n        } else {\n          return snippet\n        }\n      })\n      this.setState({snippets})\n      const userSnippets = this.state.userSnippets.map(snippet=>{\n        if(snippet.id === response.id){\n          return response\n        } else {\n          return snippet\n        }\n      })\n      this.setState({userSnippets})\n    }\n\n    deleteSnippet = (response) => {\n      const snippets = this.state.snippets.filter(snippet=>{\n        if(snippet.id === response.id){\n          return false\n        } else {\n          return true\n        }\n      })\n      this.setState({snippets})\n      const userSnippets = this.state.userSnippets.filter(snippet=>{\n        if(snippet.id === response.id){\n          return false\n        } else {\n          return true\n        }\n      })\n      this.setState({userSnippets})\n    }\n\n    handleKeyPress = e => {\n      if (e.charCode === 13){\n        this.signIn()\n      }\n    }\n\n    handleLogOut= e => {\n      this.setState({\n        userSnippets: [],\n        selectedSnippet: {},\n        snippetForm: {\n          name: '',\n          html: '',\n          css: '',\n          user_id: '',\n          tags: ''\n        },\n        authenticated: false,\n        loginToggled: true,\n        loginUsername: {username: '', image: ''},\n        currentuser: null,\n      })\n    }\n\n    handleSearch = e => {\n      this.setState({searchValue: e.target.value})\n    }\n\n    filterSnippets = (snippets) => {\n      if (this.state.searchValue===\"\"){\n        return snippets\n      }\n      return snippets.filter(snippet=>{\n        return snippet.tags.map(tag => tag.tag_name.toLowerCase().includes(this.state.searchValue.toLowerCase())).includes(true)\n      })\n    }\n\n    clickTag = (e) => {\n      e.target.parentNode.click()\n      document.getElementById('search').focus()\n      this.setState({searchValue: e.target.innerHTML})\n    }\n\n    generateStyleSheet = e => {\n      fetch(`${BASEURL}/api/v1/snippets/${e.target.id}`)\n      .then(r=>r.json())\n      .then(styleSheet=>{\n        this.setState({styleSheet})\n      })\n    }\n\n    downloadCSS = e => {\n      e.persist()\n      fetch(`${BASEURL}/api/v1/snippets/${e.target.id}/stylesheet`)\n      .then(r=>r.json())\n      .then(data=>{\n        const a = window.document.createElement('a');\n        a.href = window.URL.createObjectURL(new Blob([data.css], {type: 'text/css'}));\n        a.download = `snippet_${e.target.id}.css`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      })\n    }\n\n\n  render() {\n\n    return (\n      <Router>\n        <div className=\"App\">\n          <Header handleKeyPress={this.handleKeyPress} handleLogOut={this.handleLogOut} currentuser={this.state.currentuser} handleRegister={this.handleRegister} signIn={this.signIn} handleLoginUsername={this.handleLoginUsername} loginUsername={this.state.loginUsername} loginToggled={this.state.loginToggled} authenticated={this.state.authenticated} toggleLoginForm={this.toggleLoginForm} snippetForm={this.state.snippetForm} handleChange={this.handleChange} handleSubmit={this.handleSubmit} />\n          <Row>\n            <Col s={10} offset={'s1'}>\n              <Route\n                exact path='/'\n                render={() => <SnippetContainer clickTag={this.clickTag} searchValue={this.state.searchValue} handleSearch={this.handleSearch} deleteSnippet={this.deleteSnippet} updateSnippet={this.updateSnippet} snippets={this.filterSnippets(this.state.snippets)} />}\n              />\n              {this.state.authenticated && <Route\n                exact path='/user'\n                render={() => <SnippetContainer clickTag={this.clickTag} searchValue={this.state.searchValue} handleSearch={this.handleSearch} deleteSnippet={this.deleteSnippet} updateSnippet={this.updateSnippet} snippets={this.filterSnippets(this.state.userSnippets)} user={this.state.currentuser} />}\n              />}\n              <Route\n                exact path='/snippet/:id'\n                render={props => <SnippetView downloadCSS={this.downloadCSS} styleSheet={this.state.styleSheet} generateStyleSheet={this.generateStyleSheet} snippets={this.state.snippets} snippetId={parseInt(props.match.params.id)}/>}\n              />\n            </Col>\n          </Row>\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}